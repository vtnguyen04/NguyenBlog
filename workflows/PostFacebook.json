{"createdAt":"2025-10-05T07:11:55.402Z","updatedAt":"2025-10-07T03:07:37.000Z","id":"ZOoqmJUlJW8VgAeM","name":"PostFacebook","active":true,"isArchived":false,"nodes":[{"parameters":{"rule":{"interval":[{"triggerAtHour":8},{"triggerAtHour":20}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-384,-112],"id":"c97fc88a-b2f7-4c27-b952-16d537c7cba9","name":"FB news LC"},{"parameters":{"rule":{"interval":[{"triggerAtHour":9},{"triggerAtHour":21}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-384,80],"id":"4ea505ba-4152-4a34-9684-dd2d69a11aeb","name":"FB AI news LC"},{"parameters":{"rule":{"interval":[{"field":"cronExpression","expression":"0 0 16 * * 2,6"}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-384,464],"id":"5d8db2d0-c748-4234-8c42-36659e2141bc","name":"FB Analysis LC"},{"parameters":{"rule":{"interval":[{"field":"cronExpression","expression":"0 0 16 * * 1,4"}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-384,272],"id":"5acd89b1-2f92-48a7-b630-cf8b7178b38d","name":"FB Analysis AI LC"},{"parameters":{"documentId":{"__rl":true,"value":"1fTKz8sabXOio65TmoqctZUDCtVR8hj8_zEXsJ_o_zVA","mode":"list","cachedResultName":"Multimedia Content","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1fTKz8sabXOio65TmoqctZUDCtVR8hj8_zEXsJ_o_zVA/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1fTKz8sabXOio65TmoqctZUDCtVR8hj8_zEXsJ_o_zVA/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"FB status","lookupValue":"pending"},{"lookupColumn":"B√†i vi·∫øt t·ª´ k√™nh","lookupValue":"News"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[-160,-112],"id":"884e41fe-8cdd-4ec8-9432-047ccbea1dd0","name":"Get row(s) in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"WprQcr8lVOW0rgT7","name":"LC sheet"}}},{"parameters":{"documentId":{"__rl":true,"value":"1fTKz8sabXOio65TmoqctZUDCtVR8hj8_zEXsJ_o_zVA","mode":"list","cachedResultName":"Multimedia Content","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1fTKz8sabXOio65TmoqctZUDCtVR8hj8_zEXsJ_o_zVA/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1fTKz8sabXOio65TmoqctZUDCtVR8hj8_zEXsJ_o_zVA/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"B√†i vi·∫øt t·ª´ k√™nh","lookupValue":"AI news"},{"lookupColumn":"FB status","lookupValue":"pending"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[-160,176],"id":"f7b260ae-1699-4e80-9532-61e17943ccac","name":"Get row(s) in sheet1","credentials":{"googleSheetsOAuth2Api":{"id":"WprQcr8lVOW0rgT7","name":"LC sheet"}}},{"parameters":{"documentId":{"__rl":true,"value":"1fTKz8sabXOio65TmoqctZUDCtVR8hj8_zEXsJ_o_zVA","mode":"list","cachedResultName":"Multimedia Content","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1fTKz8sabXOio65TmoqctZUDCtVR8hj8_zEXsJ_o_zVA/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1fTKz8sabXOio65TmoqctZUDCtVR8hj8_zEXsJ_o_zVA/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"B√†i vi·∫øt t·ª´ k√™nh","lookupValue":"Analysis"},{"lookupColumn":"FB status","lookupValue":"pending"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[-160,464],"id":"95a84986-97eb-476a-af1d-d8659126689e","name":"Get row(s) in sheet3","credentials":{"googleSheetsOAuth2Api":{"id":"WprQcr8lVOW0rgT7","name":"LC sheet"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"1e149af3-39b4-4caf-800e-f1ad70612925","leftValue":"={{ $json.category }}","rightValue":"news","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[288,-32],"id":"1af14c57-78c2-49d8-9bfb-ceb1620a3f92","name":"If"},{"parameters":{"assignments":{"assignments":[{"id":"d28cf415-91e3-46c1-ae03-ddeb15a28160","name":"prompt","value":"=B·∫°n l√† **Content Writer Gen Z c·ªßa Learning Chain**, c√≥ nhi·ªám v·ª• cung c·∫•p tin t·ª©c nhanh, l√¥i cu·ªën, nh∆∞ng v·∫´n c√≥ g√≥c nh√¨n th·∫≥ng th·∫Øn, **th√¢n m·∫≠t** v·ªõi ng∆∞·ªùi ƒë·ªçc. *   **Phong c√°ch:** Th√¢n thi·ªán, g·∫ßn g≈©i (nh∆∞ n√≥i chuy·ªán v·ªõi \"anh em\"), s·ª≠ d·ª•ng icon h·ª£p l√Ω, t·ªëc ƒë·ªô nhanh. Ng√¥n ng·ªØ **ho√†n to√†n t·ª± nhi√™n**, kh√¥ng d√πng bi·ªát ng·ªØ AI/GPT, ƒë·∫£m b·∫£o ch·∫•t l∆∞·ª£ng Human-like. *   **M·ª•c ti√™u:** Cung c·∫•p th√¥ng tin k·ªãp th·ªùi v√† duy tr√¨ s·ª± t∆∞∆°ng t√°c cao.  ## 2. ƒê·∫∑c t·∫£ C·∫•u tr√∫c Output (Caption & Title for Thumbnail) Output ph·∫£i tu√¢n th·ªß nghi√™m ng·∫∑t c·∫•u tr√∫c sau. TUY·ªÜT ƒê·ªêI KH√îNG S·ª¨ D·ª§NG HTML.  ### A. Title (D√†nh cho Thumbnail Image - G·∫ÆN L√äN ·∫¢NH) *   **ƒê·ªãnh d·∫°ng:** **2 d√≤ng ri√™ng bi·ªát.**     *   **D√≤ng 1 (T√≥m t·∫Øt):** C√¢u t√≥m t·∫Øt/Gi·∫≠t t√≠t ng·∫Øn g·ªçn (T·ªëi ƒëa 7 t·ª´). PH·∫¢I H·∫§P D·∫™N.     *   **D√≤ng 2 (C√¢u h·ªèi):** C√¢u h·ªèi m·ªü, g·ª£i m·ªü t∆∞ duy ho·∫∑c g√≥c nh√¨n (Kh√¥ng qu√° 12 t·ª´).  ### B. Facebook Caption (Tin T·ª©c Nhanh) *   **C·∫•u tr√∫c:** Ph·∫£i c√≥ 3-4 ƒëo·∫°n r√µ r√†ng (Ph√¢n t√°ch b·∫±ng 2 k√Ω t·ª± xu·ªëng d√≤ng `\\n\\n`).     1.  **Ti√™u ƒë·ªÅ H·∫•p d·∫´n (1 d√≤ng):** S·ª≠ d·ª•ng Icon (v√≠ d·ª•: üî•, üí°).     2.  **T√≥m t·∫Øt Tin t·ª©c Nhanh:** Ch·∫Øt l·ªçc nhanh c√°c ƒëi·ªÉm ch√≠nh t·ª´ RAW_CONTENT (s·ª≠ d·ª•ng ng√¥n ng·ªØ th√¢n m·∫≠t \"anh em\").     3.  **G√≥c nh√¨n Learning Chain:** ƒê∆∞a ra 1-2 c√¢u nh·∫≠n x√©t/g√≥c nh√¨n ng·∫Øn **mang t√≠nh ch·∫•t c√° nh√¢n** (v√≠ d·ª•: \"ƒêi·ªÅu n√†y cho th·∫•y...\", \"Theo m√¨nh th√¨...\").     4.  **CTA & Hashtag:** C√¢u h·ªèi th√¢n thi·ªán, khuy·∫øn kh√≠ch th·∫£o lu·∫≠n **(DUY NH·∫§T 1 c√¢u h·ªèi)**. S·ª≠ d·ª•ng **T·ªêI ƒêA 5 Hashtag** (bao g·ªìm #learningchain v√† ph·∫£i ·ªü 1 d√≤ng ri√™ng bi·ªát cu·ªëi c√πng). *   **ƒê·ªô d√†i:** T·ªïng b√†i vi·∫øt ** NG·∫ÆN**, kh√¥ng qu√° 500 t·ª´.  ## 3. D·ªØ li·ªáu ƒê·∫ßu v√†o (Input Variables)  ### RAW_CONTENT {{ $json['n·ªôi dung raw '] }}\n\noutput tu√¢n theo json:\n\n{\n  \"content\": \"n·ªôi dung b√†i ƒëƒÉng\",\n  \"top\": \"title top\",\n  \"bottom\": \"tittle bottom\"\n}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[512,-128],"id":"7494f51e-550e-47a5-af89-22aedbe92891","name":"prompt_news"},{"parameters":{"assignments":{"assignments":[{"id":"5f28bfa3-0c0e-4a9b-b5ce-5e5eb5e92631","name":"prompt","value":"=B·∫°n l√† **Chuy√™n gia Ph√¢n t√≠ch C·∫•p cao c·ªßa Learning Chain** (C√¥ng ty truy·ªÅn th√¥ng & gi√°o d·ª•c v·ªÅ AI/Crypto). Nhi·ªám v·ª• c·ªßa b·∫°n l√† bi·∫øn n·ªôi dung th√¥ (RAW_CONTENT) th√†nh m·ªôt b√†i ph√¢n t√≠ch chuy√™n s√¢u, c√≥ g√≥c nh√¨n, nh·∫≠n ƒë·ªãnh ri√™ng, mang t√≠nh gi√°o d·ª•c v√† t∆∞ duy. *   **Phong c√°ch:** Chuy√™n nghi·ªáp, s·∫Øc s·∫£o, c√≥ t√≠nh thuy·∫øt ph·ª•c cao. Ng√¥n ng·ªØ **ho√†n to√†n t·ª± nhi√™n**, kh√¥ng d√πng bi·ªá\nt ng·ªØ AI/GPT, ƒë·∫£m b·∫£o ng∆∞·ªùi ƒë·ªçc kh√¥ng th·ªÉ ph√¢n bi·ªát ƒë∆∞·ª£c AI hay ng∆∞·ªùi vi·∫øt (Human-like Quality). *   **M·ª•c ti√™u:** ƒê·ªãnh v·ªã Learning Chain l√† ngu·ªìn ki·∫øn th·ª©c ƒë√°ng tin c·∫≠y.  ## 2. ƒê·∫∑c t·∫£ C·∫•u tr√∫c Output (Caption & Title for Thumbnail) Output ph·∫£i tu√¢n th·ªß nghi√™m ng·∫∑t c·∫•u tr√∫c sau. TUY·ªÜT ƒê·ªêI KH√îNG S·ª¨ D·ª§NG HTML.  ### A. Title (D√†nh cho Thumbnail Image - G·∫ÆN L√äN ·∫¢NH) *   **ƒê·ªãnh d·∫°ng:** **2 d√≤ng ri√™ng bi·ªát.**     *   **D√≤ng 1 (T√≥m t·∫Øt):** C√¢u t√≥m t·∫Øt/Gi·∫≠t t√≠t ng·∫Øn g·ªçn (T·ªëi ƒëa 7 t·ª´). PH·∫¢I H·∫§P D·∫™N.     *   **D√≤ng 2 (C√¢u h·ªèi):** C√¢u h·ªèi m·ªü, g·ª£i m·ªü t∆∞ duy ho·∫∑c g√≥c nh√¨n (Kh√¥ng qu√° 15 t·ª´).  ### B. Facebook Caption (Ph√¢n t√≠ch Chuy√™n s√¢u) *   **C·∫•u tr√∫c:** Ph·∫£i c√≥ 4 ph·∫ßn r√µ r√†ng (Ph√¢n t√°ch b·∫±ng 2 k√Ω t·ª± xu·ªëng d√≤ng `\\n\\n`).     1.  **M·ªü b√†i:** ƒê·∫∑t v·∫•n ƒë·ªÅ, gi·ªõi thi·ªáu ch·ªß ƒë·ªÅ m·ªôt c√°ch thu h√∫t.     2.  **Ph√¢n t√≠ch/Nh·∫≠n ƒë·ªãnh S√¢u:** Tr√¨nh b√†y c√°c √Ω ch√≠nh t·ª´ RAW_CONTENT v√† **l·ªìng gh√©p nh·∫≠n ƒë·ªãnh/b√†i h·ªçc t∆∞ duy** c·ªßa Learning Chain.     3.  **H√†nh ƒë·ªông/B√†i h·ªçc:** K·∫øt lu·∫≠n v·ªÅ √Ω nghƒ©a, b√†i h·ªçc r√∫t ra, ho·∫∑c d·ª± b√°o d√†i h·∫°n.     4.  **CTA & Hashtag:** C√¢u h·ªèi th√¢n thi·ªán, khuy·∫øn kh√≠ch th·∫£o lu·∫≠n **(DUY NH·∫§T 1 c√¢u h·ªèi)**. S·ª≠ d·ª•ng **T·ªêI ƒêA 5 Hashtag** (bao g·ªìm #learningchain v√† ph·∫£i ·ªü 1 d√≤ng ri√™ng bi·ªát cu·ªëi c√πng). *   **ƒê·ªô d√†i:** T·ªïng b√†i vi·∫øt kh√¥ng qu√° 800 t·ª´ (∆Øu ti√™n 400-600 t·ª´).  ## 3. D·ªØ li·ªáu ƒê·∫ßu v√†o (Input Variables)  ### RAW_CONTENT### RAW_CONTENT {{ $json['n·ªôi dung raw '] }} \n\noutput tu√¢n theo json:  \n{   \n\"content\": \"n·ªôi dung b√†i ƒëƒÉng l∆∞u √Ω 1 b√†i ƒëƒÉng ho√†n ch·ªânh, s·∫µn s√†ng ƒëƒÉng l·∫≠p t·ª©c, tr√°nh c√°c nh√£n n·ªôi b·ªô nh∆∞ CTA & Hashtag, m·ªü b√†i, th√¢n b√†i , v.v\",   \n\"top\": \"title top\",   \n\"bottom\": \"tittle bottom\" \n}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[512,112],"id":"0450a77b-5097-4814-aa59-e93cf64611f3","name":"prompt_analysis"},{"parameters":{"model":{"__rl":true,"value":"gpt-5-mini","mode":"list","cachedResultName":"gpt-5-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[800,96],"id":"034a0526-c767-40ce-b48f-f579ae42912a","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"fusjifoCPA1JwyYW","name":"302"}}},{"parameters":{"schemaType":"manual","inputSchema":"\n{\n  \"content\": \"n·ªôi dung b√†i ƒëƒÉng\",\n  \"top\": \"title top\",\n  \"bottom\": \"tittle bottom\"\n}"},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[928,96],"id":"256f3b70-d83f-4938-8b97-ef76fc500708","name":"Structured Output Parser"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"529663a1-a98c-43fa-a4b5-853539162c8c","leftValue":"={{ $('l·ªçc d·ªØ li·ªáu').item.json.field }}","rightValue":"crypto","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1424,176],"id":"ef5a16f9-35eb-423f-abfa-beda4340ab47","name":"If1"},{"parameters":{"operation":"download","fileId":{"__rl":true,"value":"1AQ6ldv0L74He_7S7uvHmzbD0LSsN9y9b","mode":"list","cachedResultName":"fb.jpg","cachedResultUrl":"https://drive.google.com/file/d/1AQ6ldv0L74He_7S7uvHmzbD0LSsN9y9b/view?usp=drivesdk"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[1648,80],"id":"dc0ff672-75b3-4dc8-85cb-b29b1d8e9a50","name":"Download file","credentials":{"googleDriveOAuth2Api":{"id":"K8L54dKYg8Domgbg","name":"LC Drive"}}},{"parameters":{"mode":"combine","combineBy":"combineByPosition","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[1200,176],"id":"fadc03c4-5efb-4174-aecf-2aee8af9d794","name":"Merge"},{"parameters":{"language":"python","pythonCode":"\nimport os\nimport sys\nimport json\nimport re\nfrom datetime import datetime\ntry:\n    from zoneinfo import ZoneInfo\n    tz = ZoneInfo(\"Asia/Ho_Chi_Minh\")\nexcept Exception:\n    try:\n        import pytz\n        tz = pytz.timezone(\"Asia/Ho_Chi_Minh\")\n    except Exception:\n        tz = None  # will use system localtime\n\ninput = _input.all()[-1]\n\ndef vn_weekday_name(dt):\n    wd = dt.weekday() \n    mapping = {\n        0: \"Th·ª© 2\",\n        1: \"Th·ª© 3\",\n        2: \"Th·ª© 4\",\n        3: \"Th·ª© 5\",\n        4: \"Th·ª© 6\",\n        5: \"Th·ª© 7\",\n        6: \"Ch·ªß nh·∫≠t\"\n    }\n    return mapping.get(wd, \"\")\n\ndef format_vn_datetime(dt):\n\n    day_name = vn_weekday_name(dt)\n    d = dt.day\n    m = dt.month\n    y = dt.year\n    date_str = f\"{d}/{m}/{y}\"\n    return f\"{day_name}, {date_str}\"\n\ndef detect_topic_pair(title):\n    \"\"\"\n    Tr·∫£ v·ªÅ dict: {\"category\": ..., \"topic\": ...}\n    - category: \"news\" | \"analysis\" | \"other\"   (∆∞u ti√™n)\n    - topic: \"ai\" | \"crypto\"\n    \"\"\"\n    if not title:\n        return {\"category\": \"other\", \"topic\": \"crypto\"}\n\n    txt = title.lower()\n\n    # Word-boundary checks (primary)\n    has_news = bool(re.search(r'(?<!\\w)news(?!\\w)', txt, flags=re.IGNORECASE))\n    has_analysis = bool(re.search(r'(?<!\\w)analysis(?!\\w)', txt, flags=re.IGNORECASE))\n    has_ai = bool(re.search(r'(?<!\\w)ai(?!\\w)', txt, flags=re.IGNORECASE))\n\n    # Fallback substring checks (looser) if word-boundary didn't match\n    if not has_news and \"news\" in txt:\n        has_news = True\n    if not has_analysis and \"analysis\" in txt:\n        has_analysis = True\n    if not has_ai and \"ai\" in txt:\n        has_ai = True\n\n    # category priority: news -> analysis -> other\n    if has_news:\n        category = \"news\"\n    elif has_analysis:\n        category = \"analysis\"\n    else:\n        category = \"other\"\n\n    # topic: ai if ai present, else crypto\n    topic = \"ai\" if has_ai else \"crypto\"\n\n    return category, topic\n\ndef now_with_tz():\n    if tz:\n        try:\n            return datetime.now(tz)\n        except Exception:\n            return datetime.now()\n    else:\n        return datetime.now()\n\ntitle = input.json[\"B√†i vi·∫øt t·ª´ k√™nh\"]\ndt = now_with_tz()\ndate_display = format_vn_datetime(dt)\ncategory, topic = detect_topic_pair(title)\n\ninput.json.datetime_vn = date_display\ninput.json.field = topic\ninput.json.category = category\nreturn input"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[64,176],"id":"f3de9c0d-0faf-406e-bbd3-399333f529d1","name":"l·ªçc d·ªØ li·ªáu"},{"parameters":{"httpRequestMethod":"POST","graphApiVersion":"v23.0","node":"me","edge":"photos","options":{"queryParameters":{"parameter":[{"name":"message","value":"={{ $('t·∫°o content cu·ªëi c√πng').item.json.output.content }}"},{"name":"url","value":"={{ $json.image_url }}"}]}}},"type":"n8n-nodes-base.facebookGraphApi","typeVersion":1,"position":[2096,176],"id":"9070a66d-e960-4d89-86d1-50669dc6d919","name":"Learning chain vietnam","credentials":{"facebookGraphApi":{"id":"4sCYPtE2NEsiGaxh","name":"Learning Chain VN"}}},{"parameters":{"template_id":{"__rl":true,"value":"nkjllkaujfdbw","mode":"list","cachedResultName":"FB AI"},"layers":{"layerItems":[{"layerId":"main_image|picture","property":"image","imageValue":"={{ $json.data.task_result.images[0].url }}"},{"layerId":"time|text","property":"text","textValue":"={{ $('l·ªçc d·ªØ li·ªáu').item.json.datetime_vn }}"},{"layerId":"thumbnail_top|text","valueValue":"={{ $('t·∫°o content cu·ªëi c√πng').item.json.output.top }}"},{"layerId":"thumbnail_bottom|text","valueValue":"={{ $('t·∫°o content cu·ªëi c√πng').item.json.output.bottom }}"}]},"additionalFields":{}},"type":"n8n-nodes-placid.placid","typeVersion":1,"position":[1872,368],"id":"e5faa08e-ab19-470f-9a80-0caa0ad69c3f","name":"AI","credentials":{"placidApi":{"id":"Das3NQOQwug7a87L","name":"Placid account"}}},{"parameters":{"template_id":{"__rl":true,"value":"nkjllkaujfdbw","mode":"list","cachedResultName":"FB AI"},"layers":{"layerItems":[{"layerId":"New picture layer|picture","property":"imageBinary","imageBinaryValue":"data"},{"layerId":"main_image|picture","property":"image","imageValue":"={{ $json.data.task_result.images[0].url }}"},{"layerId":"time|text","property":"text","textValue":"={{ $('l·ªçc d·ªØ li·ªáu').item.json.datetime_vn }}"},{"layerId":"thumbnail_bottom|text","property":"text","textValue":"={{ $('t·∫°o content cu·ªëi c√πng').item.json.output.bottom }}"},{"layerId":"thumbnail_top|text","property":"text","textValue":"={{ $('t·∫°o content cu·ªëi c√πng').item.json.output.top }}"}]},"additionalFields":{}},"type":"n8n-nodes-placid.placid","typeVersion":1,"position":[1872,80],"id":"347b6123-d5a6-4fc4-bcd5-6a5d637eeac3","name":"Crypto","credentials":{"placidApi":{"id":"Das3NQOQwug7a87L","name":"Placid account"}}},{"parameters":{"httpRequestMethod":"POST","graphApiVersion":"v23.0","node":"me","edge":"photos","options":{"queryParameters":{"parameter":[{"name":"message","value":"={{ $('t·∫°o content cu·ªëi c√πng').item.json.output.content }}"},{"name":"url","value":"={{ $json.image_url }}"}]}}},"type":"n8n-nodes-base.facebookGraphApi","typeVersion":1,"position":[2096,-16],"id":"1c65c9fb-cefc-4477-8f84-47e6bc805a52","name":"Learning chain academy","credentials":{"facebookGraphApi":{"id":"Wr3J8kQWBcXwKIGe","name":"Learning Chain Academy"}}},{"parameters":{"httpRequestMethod":"POST","graphApiVersion":"v23.0","node":"me","edge":"photos","options":{"queryParameters":{"parameter":[{"name":"message","value":"={{ $('t·∫°o content cu·ªëi c√πng').item.json.output.content }}"},{"name":"url","value":"={{ $json.image_url }}"}]}}},"type":"n8n-nodes-base.facebookGraphApi","typeVersion":1,"position":[2096,368],"id":"a3dfbb7f-c72f-4cb0-bb11-9ce8fdd8edf7","name":"H·ªçc vi·ªán LC","credentials":{"facebookGraphApi":{"id":"plpgD5EhWoRAT4vE","name":"H·ªçc Vi·ªán Learning Chain"}}},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1fTKz8sabXOio65TmoqctZUDCtVR8hj8_zEXsJ_o_zVA","mode":"list","cachedResultName":"Multimedia Content","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1fTKz8sabXOio65TmoqctZUDCtVR8hj8_zEXsJ_o_zVA/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1fTKz8sabXOio65TmoqctZUDCtVR8hj8_zEXsJ_o_zVA/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $('l·ªçc d·ªØ li·ªáu').item.json.row_number }}","FB status":"done"},"matchingColumns":["row_number"],"schema":[{"id":"B√†i vi·∫øt t·ª´ k√™nh","displayName":"B√†i vi·∫øt t·ª´ k√™nh","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Tittle b√†i vi·∫øt g·ªëc","displayName":"Tittle b√†i vi·∫øt g·ªëc","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Link b√†i vi·∫øt g·ªëc","displayName":"Link b√†i vi·∫øt g·ªëc","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Tittle b√†i vi·∫øt m·ªõi","displayName":"Tittle b√†i vi·∫øt m·ªõi","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"n·ªôi dung raw ","displayName":"n·ªôi dung raw ","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"meta_description","displayName":"meta_description","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"suggest tags","displayName":"suggest tags","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"key_word","displayName":"key_word","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"slug","displayName":"slug","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"thumbnail_url","displayName":"thumbnail_url","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"N·ªôi dung b√†i vi·∫øt m·ªõi (HTML)","displayName":"N·ªôi dung b√†i vi·∫øt m·ªõi (HTML)","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"tele status","displayName":"tele status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"FB status","displayName":"FB status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Web status","displayName":"Web status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Web link","displayName":"Web link","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[2320,272],"id":"85e1a18b-0ae9-4ac4-bf15-439124c16a91","name":"Update row in sheet","credentials":{"googleSheetsOAuth2Api":{"id":"WprQcr8lVOW0rgT7","name":"LC sheet"}}},{"parameters":{"promptType":"define","text":"={{ $json.prompt }}","hasOutputParser":true,"batching":{}},"type":"@n8n/n8n-nodes-langchain.chainLlm","typeVersion":1.7,"position":[800,-128],"id":"ba24883f-08b2-4dcc-8b44-a86d613d3dba","name":"t·∫°o content cu·ªëi c√πng"},{"parameters":{"promptType":"define","text":"=# Prompt T·ªëi ∆Øu cho AI Agent: Quy·∫øt ƒê·ªãnh Tool & Tr·∫£ v·ªÅ URL ·∫¢nh Cu·ªëi C√πng (Simplified)\n\n## 1. Vai Tr√≤ v√† M·ª•c ti√™u (Role & Persona)\nB·∫°n l√† **Tr∆∞·ªüng nh√≥m Content Strategist Agent** c·ªßa Learning Chain. Nhi·ªám v·ª• duy nh·∫•t v√† cu·ªëi c√πng c·ªßa b·∫°n l√† cung c·∫•p **DUY NH·∫§T 1 URL** c·ªßa h√¨nh ·∫£nh t·ªëi ∆∞u nh·∫•t ƒë·ªÉ minh h·ªça cho RAW_CONTENT. B·∫°n ph·∫£i quy·∫øt ƒë·ªãnh s·ª≠ d·ª•ng 1 trong 2 c√¥ng c·ª• c√≥ s·∫µn:\n1.  **'Run an Actor and get dataset in Apify' (Apify Crawl):** ƒê·ªÉ t√¨m ki·∫øm (Crawl) h√¨nh ·∫£nh th·ª±c t·∫ø, li√™n quan ƒë·∫øn ng∆∞·ªùi, t·ªï ch·ª©c, ho·∫∑c s·ª± ki·ªán c√≥ th·∫≠t.\n2.  **'Call 't·∫°o ·∫£nh'' Tool (Generate):** ƒê·ªÉ t·∫°o h√¨nh ·∫£nh m·ªõi, ph√π h·ª£p v·ªõi c√°c kh√°i ni·ªám tr·ª´u t∆∞·ª£ng, ph√¢n t√≠ch th·ªã tr∆∞·ªùng, v.v.\n\n## 2. Quy T·∫Øc Quy·∫øt ƒê·ªãnh C√¥ng C·ª• (Conditional Tool Use - Simplified)\n1.  **S·ª≠ d·ª•ng Apify Crawl:** N·∫øu RAW_CONTENT ƒë·ªÅ c·∫≠p ƒë·∫øn **t√™n ng∆∞·ªùi c·ª• th·ªÉ, t·ªï ch·ª©c, ho·∫∑c tin t·ª©c/s·ª± ki·ªán th·ª±c t·∫ø** c·∫ßn h√¨nh ·∫£nh minh h·ªça ch√¢n th·ª±c.\n    *   **Tool Input:** B·∫°n ph·∫£i t·∫°o m·ªôt **Input JSON** (chu·∫©n cho Apify Actor Google Images Scraper) ch·ª©a **5 Query t√¨m ki·∫øm h√¨nh ·∫£nh t·ªët nh·∫•t** (Ti·∫øng Anh, ch√≠nh x√°c, kh√¥ng tr√πng l·∫∑p) ƒë·ªÉ t·ªëi ƒëa h√≥a ƒë·ªô li√™n quan.\n2.  **S·ª≠ d·ª•ng 'Call 't·∫°o ·∫£nh'' (Generate):** N·∫øu RAW_CONTENT ƒë·ªÅ c·∫≠p ƒë·∫øn **kh√°i ni·ªám tr·ª´u t∆∞·ª£ng, d·ª± b√°o th·ªã tr∆∞·ªùng, chi·∫øn l∆∞·ª£c, ho·∫∑c ph√¢n t√≠ch vƒ© m√¥** kh√¥ng d·ªÖ t√¨m th·∫•y h√¨nh ·∫£nh minh h·ªça th·ª±c t·∫ø.\n    *   **Tool Input:** B·∫°n ch·ªâ c·∫ßn truy·ªÅn tr·ª±c ti·∫øp `RAW_CONTENT` v√†o Tool. (Tool t·ª± x·ª≠ l√Ω Prompt Sinh ·∫¢nh).\n\n## 3. Quy Tr√¨nh v√† R√†ng Bu·ªôc ƒê·∫ßu ra (Final Output Constraint)\n1.  **Th·ª±c thi:** B·∫°n **ph·∫£i ch·ªçn v√† s·ª≠ d·ª•ng DUY NH·∫§T 1 trong 2 Tool** ƒë·ªÉ ho√†n th√†nh nhi·ªám v·ª•.\n2.  **ƒê·∫ßu ra cu·ªëi c√πng:** B·∫ÆT BU·ªòC ph·∫£i l√† **DUY NH·∫§T m·ªôt URL ·∫£nh h·ª£p l·ªá** ƒë∆∞·ª£c tr·∫£ v·ªÅ t·ª´ Tool b·∫°n ch·ªçn.\n3.  **Lo·∫°i tr·ª´:** Tuy·ªát ƒë·ªëi **kh√¥ng gi·∫£i th√≠ch, kh√¥ng vƒÉn b·∫£n b·ªï sung, kh√¥ng JSON/HTML**. Ch·ªâ tr·∫£ v·ªÅ URL.\n\n## 4. D·ªØ li·ªáu ƒê·∫ßu v√†o (Input Variables)\n\n### RAW_CONTENT\n\n{{ $json['n·ªôi dung raw '] }}\n\n## 5. L·ªánh Th·ª±c thi\nPh√¢n t√≠ch RAW_CONTENT. Quy·∫øt ƒë·ªãnh s·ª≠ d·ª•ng **Chu·ªói Apify** hay **'Call 't·∫°o ·∫£nh'** Tool, th·ª±c thi Tool ƒë√≥, v√† **tr·∫£ v·ªÅ URL ·∫£nh cu·ªëi c√πng**.","hasOutputParser":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[1312,-544],"id":"65d8e37c-6022-4fc0-a058-1ba6711c307a","name":"ph√¢n t√≠ch chi·∫øn l∆∞·ª£c t·∫°o ·∫£nh"},{"parameters":{"schemaType":"manual","inputSchema":"{\n  \"url\": \"url ·∫£nh h·ª£p l√≠ nh·∫•t\"\n}"},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[1584,-288],"id":"86e1571c-f9a0-45b8-9e0c-5a85928ea124","name":"Structured Output Parser1"},{"parameters":{"description":"Call this tool when you want to create image, input is raw_content","workflowId":{"__rl":true,"value":"EPr0W7oxcZgcbD4v","mode":"list","cachedResultUrl":"/workflow/EPr0W7oxcZgcbD4v","cachedResultName":"t·∫°o ·∫£nh"},"workflowInputs":{"mappingMode":"defineBelow","value":{"raw_content":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('raw_content', ``, 'string') }}","model_name":"kling-v2"},"matchingColumns":[],"schema":[{"id":"raw_content","displayName":"raw_content","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"model_name","displayName":"model_name","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false}},"type":"@n8n/n8n-nodes-langchain.toolWorkflow","typeVersion":2.2,"position":[1408,-288],"id":"67d9fe03-2aa5-4c47-8ecc-8d05cc9cf798","name":"Call 't·∫°o ·∫£nh'"},{"parameters":{"query":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Query', ``, 'string') }}","options":{}},"type":"@tavily/n8n-nodes-tavily.tavilyTool","typeVersion":1,"position":[1280,-288],"id":"c789bbee-5c1b-4473-9122-e338ab8a7ddd","name":"Search in Tavily","credentials":{"tavilyApi":{"id":"uzYvO5Q8ciapV5q5","name":"Tavily account"}}},{"parameters":{"workflowId":{"__rl":true,"value":"EPr0W7oxcZgcbD4v","mode":"list","cachedResultUrl":"/workflow/EPr0W7oxcZgcbD4v","cachedResultName":"t·∫°o ·∫£nh"},"workflowInputs":{"mappingMode":"defineBelow","value":{"raw_content":"={{ $json['n·ªôi dung raw '] }}","model_name":"kling-v2"},"matchingColumns":[],"schema":[{"id":"raw_content","displayName":"raw_content","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"model_name","displayName":"model_name","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.3,"position":[576,352],"id":"ea74adf0-055b-47e0-9701-9fd714f9dc95","name":"Call 't·∫°o ·∫£nh'1"}],"connections":{"FB news LC":{"main":[[{"node":"Get row(s) in sheet","type":"main","index":0}]]},"FB AI news LC":{"main":[[{"node":"Get row(s) in sheet1","type":"main","index":0}]]},"FB Analysis AI LC":{"main":[[{"node":"Get row(s) in sheet1","type":"main","index":0}]]},"FB Analysis LC":{"main":[[{"node":"Get row(s) in sheet3","type":"main","index":0}]]},"Get row(s) in sheet":{"main":[[{"node":"l·ªçc d·ªØ li·ªáu","type":"main","index":0}]]},"Get row(s) in sheet1":{"main":[[{"node":"l·ªçc d·ªØ li·ªáu","type":"main","index":0}]]},"Get row(s) in sheet3":{"main":[[{"node":"l·ªçc d·ªØ li·ªáu","type":"main","index":0}]]},"If":{"main":[[{"node":"prompt_news","type":"main","index":0}],[{"node":"prompt_analysis","type":"main","index":0}]]},"prompt_news":{"main":[[{"node":"t·∫°o content cu·ªëi c√πng","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"t·∫°o content cu·ªëi c√πng","type":"ai_languageModel","index":0}]]},"prompt_analysis":{"main":[[{"node":"t·∫°o content cu·ªëi c√πng","type":"main","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"t·∫°o content cu·ªëi c√πng","type":"ai_outputParser","index":0}]]},"If1":{"main":[[{"node":"Download file","type":"main","index":0}],[{"node":"AI","type":"main","index":0}]]},"Download file":{"main":[[{"node":"Crypto","type":"main","index":0}]]},"Merge":{"main":[[{"node":"If1","type":"main","index":0}]]},"l·ªçc d·ªØ li·ªáu":{"main":[[{"node":"If","type":"main","index":0},{"node":"Call 't·∫°o ·∫£nh'1","type":"main","index":0}]]},"Crypto":{"main":[[{"node":"Learning chain academy","type":"main","index":0},{"node":"Learning chain vietnam","type":"main","index":0}]]},"AI":{"main":[[{"node":"H·ªçc vi·ªán LC","type":"main","index":0}]]},"Learning chain vietnam":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"H·ªçc vi·ªán LC":{"main":[[{"node":"Update row in sheet","type":"main","index":0}]]},"t·∫°o content cu·ªëi c√πng":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Structured Output Parser1":{"ai_outputParser":[[{"node":"ph√¢n t√≠ch chi·∫øn l∆∞·ª£c t·∫°o ·∫£nh","type":"ai_outputParser","index":0}]]},"Call 't·∫°o ·∫£nh'":{"ai_tool":[[{"node":"ph√¢n t√≠ch chi·∫øn l∆∞·ª£c t·∫°o ·∫£nh","type":"ai_tool","index":0}]]},"Search in Tavily":{"ai_tool":[[{"node":"ph√¢n t√≠ch chi·∫øn l∆∞·ª£c t·∫°o ·∫£nh","type":"ai_tool","index":0}]]},"Call 't·∫°o ·∫£nh'1":{"main":[[{"node":"Merge","type":"main","index":1}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:FB news LC":{"recurrenceRules":[]},"node:FB AI news LC":{"recurrenceRules":[]},"node:FB Analysis LC":{"recurrenceRules":[]},"node:FB Analysis AI LC":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"73055cc8-c0f1-4697-a494-a8ae48462576","triggerCount":4,"shared":[{"createdAt":"2025-10-05T07:11:55.404Z","updatedAt":"2025-10-05T07:11:55.404Z","role":"workflow:owner","workflowId":"ZOoqmJUlJW8VgAeM","projectId":"9HJZe2ZyF9KLloKH"}],"tags":[]}